# Пользовательские сценарии

### Заказ товара через мобильное/десктопное приложение
 - Клиент открывает мобильное/десктопное приложение «I'll Have the BLT».
 - Выбирает ближайший магазин из списка доступных (с учетом геолокации или вручную).
 - Добавляет сэндвич в корзину.
 - Клиент (если зарегистрирован) видит доступные акции и бонусы (например, скидка 10% или значок «колбаска» за заказ), выбирает и применяет их к корзине; незарегистрированный клиент видит только стандартные акции.
 - Выбирает способ получения заказа:
  - самовывоз;
  - доставка (доступна, если магазин поддерживает эту услугу, для доставки требуется подтвержденный мобильный телефон).
 - Выбирает способ оплаты:
  - онлайн (карта, QR-код, счет для юрлиц через внешний платежный шлюз);
  - в магазине (карта, QR-код, наличные);
  - курьеру (карта, QR-код, наличные).
 - Завершает оформление заказа:
  - если выбрана оплата онлайн или по счету: клиент оплачивает через внешний шлюз, после успешной оплаты заказ автоматически формируется;
  - если выбрана оплата в магазине или курьеру: клиент нажимает «Сформировать заказ» для подтверждения;
  - если клиент выбрал доставку, то перед оплатой система потребует подтвердить мобильный телефон с помощью временного кода (если ранее данный номер не был подтвержден).
 - Клиент получает уведомление (push в приложении, email или SMS):
  - номер заказа и статус (например, «Ваш заказ принят, готовность через 15 минут»);
  - если самовывоз: маршрут до магазина с учетом трафика (через внешний картографический сервис);
  - если доставка: ориентировочное время доставки и данные курьера (при необходимости).
    
#### Условия и правила
Зарегистрированные клиенты:
  - имеют доступ к программе лояльности, т.е. накапливают бонусы (например, значки «колбаска», «сырок», «звездочки») за заказы, которые можно обменять на скидки.
  - получают приоритетные уведомления о пятничных, праздничных или национальных акциях. 
Незарегистрированные клиенты:
  - могут использовать только стандартные акции, доступные в приложении.
  - при выборе доставки должны ввести имя, телефон и email для получения чека или интернет-факса.
    
Выбор оплаты
  1) онлайн (с помощью внешней системы – карта, qr-код, оплата по счету для юр лиц)
  2) оплата в магазине (карта, qr-код, наличные)
  3) оплата курьеру (qr-код, карта)
     
Онлайн-оплата или счет для юрлиц: 
  - заказ формируется автоматически после успешной транзакции.
    
Оплата наличными или курьеру: 
  - требует ручного подтверждения клиентом через кнопку «Сформировать/Подтвердить заказ».
    
При выборе магазина отображается информации о загрузке магазина и ориентировочное время ожидания выполнения заказа.

При невозможности магазином выполнить заказ (нет ингредиентов, технические проблемы и т.д.):
- клиент получает уведомление с предложением выбрать другой магазин или отменить заказ.

Корзина:
  - для клиентов, которые 
    1) не зарегистрированы, 
    2) впервые зарегистрировались в сервисе 3) делали заказы товаров менее полугода, если количество позиций в корзине превышает 20 штук, потребуется подтверждение оператора. Об этом факте в приложении появится соответствующее уведомление (к примеру, «ваш заказ превышает установленные лимиты. Дождитесь звонка оператора для подтверждения заказа»). Заказа получит статус только после подтверждения оператором.

### Регистрация клиента в десктопном или мобильном приложении

1. Клиент запускает приложение «I'll Have the BLT» впервые (или после установки) или после перехода по url на десктопную версию. 
2. На главной странице приложения система отображает предложение зарегистрироваться (например, кнопка «Создать аккаунт» рядом с «Войти»). Может не регистрироваться и делать заказа без процедуры создания аккаунта. Но приложение должно прорекламировать «пользу» регистрации. 
3. Клиент выбирает «Создать аккаунт» и переходит на страницу регистрации.
4. На странице регистрации клиент должен ввести:
 - имя;
 - адрес электронной почты;
 - пароль;
 - подтверждение пароля
5. Клиент, проставив галочку в чек-бокс, выражает согласие с обработкой персональных данных системой.
6. Далее клиент нажимает кнопку  «Зарегистрироваться».
7. Система отправляет письмо с уникальной ссылкой для подтверждения email на указанный адрес. Клиент переходит по ссылке из письма для верификации почты. Срок действия ссылки 1 сутки.
8. После подтверждения email и перехода по ссылке система предлагает подключить двухфакторную аутентификацию:
 - клиент вводит номер телефона.
 - система отправляет временный код через SMS.
 - клиент вводит код для подтверждения номера телефона.
Клиент может пропустить этот шаг, нажав «Пропустить» или «Подключить позже».
9. После успешной регистрации, т.е. перехода по специально сгенерированной ссылке (и возможного подключения 2FA) клиент автоматически входит в приложение и попадает на главную страницу.
10. Клиент получает приветственное уведомление (push или email), а также информацию о программе лояльности (например, «Ваш первый значок «колбаска» уже начислен»). 

#### Условия и правила

1. Клиент не имеет аккунта в системе.
2. Обязательные данные: Имя, email, пароль (минимум 8 символов, включая буквы и цифры), подтверждение пароля.
3. Подтверждение email: Регистрация завершается только после перехода по ссылке из письма.
4. Двухфакторная аутентификация требует подтверждения номера телефона через SMS. Клиенту при использовании приложения, если он не подключил 2FA,  будут приходить ежедневно push сообщения с предложением подключить двухфакторную авторизацию (возможно какие-то акции).
5. Программа лояльности: 
   - зарегистрированные клиенты автоматически подключаются к программе и получают приветственный бонус (например, значок или скидку на первый заказ).
6. Регистрация сотрудников компании в приложении будет осуществляться пользователем со статусом  администратор (не относится к клиентскому сценарию).



























